<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Chat Religious Belief with Kaloon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.botpress.cloud/webchat/v3.2/inject.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Botpress Custom Styles for full-screen display */
        #webchat .bpWebchat {
            position: unset;
            width: 100%;
            height: 100%;
            max-height: 100%;
            max-width: 100%;
        }

        #webchat .bpFab {
            display: none;
        }

        /* Make the webchat container responsive */
        #webchat-container {
            flex: 1;
            overflow: hidden;
            padding: 0;
            border-radius: 1rem;
            margin-bottom: 1rem;
            background-color: #fafafa;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-8">
    <div class="bg-white p-8 rounded-2xl shadow-xl max-w-lg w-full flex flex-col h-[80vh]">
        
        <!-- Language Selector & Title -->
        <div class="flex justify-between items-center mb-4">
            <h1 id="chat-title" class="text-2xl font-bold text-gray-900">Chat Religious Belief with Kaloon</h1>
            <select id="language-select" class="p-2 rounded-md bg-gray-200 text-gray-800 text-sm">
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="fr">Français</option>
                <option value="id">Bahasa Indonesia</option>
                <option value="zh">中文</option>
            </select>
        </div>

        <!-- Botpress Chat Container -->
        <!-- This div will be filled by the Botpress script -->
        <div id="webchat-container" class="border rounded-xl">
            <!-- Put this on your page BEFORE the script below -->
            <div id="webchat" style="width: 100%; height: 100%;"></div>
        </div>
        
        <!-- Back button -->
        <div class="mt-4">
            <a href="index.html" id="go-back-link" class="inline-block px-4 py-2 bg-gray-200 text-gray-800 rounded-full shadow-md hover:bg-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                &larr; Go Back
            </a>
        </div>

    </div>

    <script>
        const translations = {
            'en': {
                'chat-title': 'Chat Religious Belief with Kaloon',
                'page-title': 'Chat Religious Belief with Kaloon',
                'go-back': 'Go Back'
            },
            'es': {
                'chat-title': 'Chatea Creencia Religiosa con Kaloon',
                'page-title': 'Chatea Creencia Religiosa con Kaloon',
                'go-back': 'Volver'
            },
            'fr': {
                'chat-title': 'Discuter Croyance Religieuse avec Kaloon',
                'page-title': 'Discuter Croyance Religieuse avec Kaloon',
                'go-back': 'Retourner'
            },
            'id': {
                'chat-title': 'Mengobrol Kepercayaan Agama dengan Kaloon',
                'page-title': 'Mengobrol Kepercayaan Agama dengan Kaloon',
                'go-back': 'Kembali'
            },
            'zh': {
                'chat-title': '与Kaloon聊天关于宗教信仰',
                'page-title': '与Kaloon聊天关于宗教信仰',
                'go-back': '返回'
            }
        };

        function setLanguage(lang) {
            const elements = translations[lang];
            document.getElementById('chat-title').textContent = elements['chat-title'];
            document.getElementById('page-title').textContent = elements['page-title'];
            document.getElementById('go-back-link').textContent = `← ${elements['go-back']}`;
            document.getElementById('language-select').value = lang;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const browserLang = navigator.language.split('-')[0];
            const supportedLangs = Object.keys(translations);
            const langToUse = supportedLangs.includes(browserLang) ? browserLang : 'en';
            setLanguage(langToUse);

            document.getElementById('language-select').addEventListener('change', (event) => {
                setLanguage(event.target.value);
            });
            
            // Botpress initialization script
            window.botpress.on("webchat:ready", () => {
                window.botpress.open();
            });
            window.botpress.init({
                "botId": "b732a6f3-8226-49f3-b113-a7a8e0082840",
                "configuration": {
                    "version": "v1",
                    "composerPlaceholder": "Hello, I believe...",
                    "botName": "Kaloon",
                    "botDescription": "Greetings. I'm Kaloon. I'm here to engage in thoughtful and respectful dialogue about religious topics. Through reflection and questioning, we can explore how you get to your beliefs and deepen our understanding. What would you like to discuss?",
                    "website": {},
                    "email": {},
                    "phone": {},
                    "termsOfService": {},
                    "privacyPolicy": {},
                    "color": "#3276EA",
                    "variant": "solid",
                    "headerVariant": "glass",
                    "themeMode": "light",
                    "fontFamily": "inter",
                    "radius": 4,
                    "feedbackEnabled": true,
                    "footer": "[⚡ by Botpress](https://botpress.com/?from=webchat)"
                },
                "clientId": "f3d2eea1-0696-4cbe-a4d8-d83effa90856",
                "selector": "#webchat"
            });
        });
    </script>
</body>
</html>
